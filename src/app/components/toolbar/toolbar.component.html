<mat-toolbar>
  <button mat-icon-button *ngIf="small" (click)="sidenav.toggle()">
    <mat-icon>{{ sidenav.opened ? 'menu_open' : 'menu' }}</mat-icon>
  </button>
  <span class="title">NgRx Playground</span>

  <span class="spacer"></span>

  <ng-container *ngIf="user$ | async as user">
    <button mat-icon-button [matBadgeHidden]="!(promoTotal$ | async)" [matBadge]="promoTotal$ | async" matBadgeSize="small" class="promo">
      <mat-icon>sell</mat-icon>
    </button>
    <div class="user" [matMenuTriggerFor]="userMenu" #menuTrigger>
      <img [src]="user.image" [alt]="user.name" />
    </div>
    <button mat-icon-button (click)="logout()">
      <mat-icon>logout</mat-icon>
    </button>

    <mat-menu #userMenu="matMenu" class="mat-elevation-z12 user-profile" xPosition="before" [overlapTrigger]="true">
      <div class="user-image">
        <img [src]="user.image" [alt]="user.name" />
      </div>
      <div class="padding">
        <p class="name">
          <strong>{{ user.name }}</strong>
        </p>
        <small>{{ user.email }}</small>
        <br />
        <small class="pill"> {{ user.role }}</small>
      </div>
    </mat-menu>
  </ng-container>
</mat-toolbar>
